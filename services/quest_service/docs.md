# Quest Service

Микросервис, отвечающий за управление задачами (`Quest`). Он предоставляет API для создания, обновления, удаления и поиска задач, а также обработку зависимостей между ними и управление категориями.

## Архитектура

Quest Service является частью микросервисной архитектуры. Он работает на **FastAPI** и использует **PostgreSQL** как основную базу данных. Взаимодействие с базой данных выполняется асинхронно с помощью **SQLAlchemy**.

### **Основные компоненты:**
- **`quest/`** - модуль, содержащий всю логику работы с задачами.
- **`category/`** - модуль для управления категориями задач.
- **`dependency/`** - модуль для управления зависимостями между задачами.
- **`database.py`** – Подключение к базе данных. Управляет соединением с PostgreSQL.
- **`Dockerfile`** – Контейнеризация. Позволяет развернуть сервис в Docker.

## Описание файлов

### `main.py`

Основной файл сервиса, отвечающий за запуск FastAPI, регистрацию маршрутов и подключение к базе данных.

#### **Основные компоненты:**
- **Инициализация FastAPI** и регистрация API-маршрутов.
- **Запуск `lifespan`-функции** для создания таблиц в базе данных при старте сервиса.
- **Зависимость от `check_api_key`** для обеспечения безопасности API.

---

### `database.py`

Отвечает за создание подключения к базе данных и управление сессиями.

#### **Основные компоненты:**
- **Асинхронный движок SQLAlchemy** для работы с PostgreSQL.
- **Фабрика сессий (`async_sessionmaker`)** для управления транзакциями.
- **Функция `create_tables()`**, создающая таблицы в базе данных при запуске.

---

### `Dockerfile`

Определяет, как контейнеризуется Quest Service в среде Docker.

---

### `quest/`

Модуль, содержащий всю логику работы с задачами. Включает:

- Модель **`QuestOrm`** для описания структуры данных.
- Функции в **`repository.py`** для работы с базой данных.
- API-маршруты в **`router.py`** для взаимодействия с пользователями.

Подробная информация в документации модуля **`quest/`**.

---

### `category/`

Модуль, содержащий логику управления категориями. Включает:

- Модель **`CategoryOrm`** для описания структуры данных.
- Функции в **`repository.py`** для работы с базой данных.
- API-маршруты в **`router.py`** для взаимодействия с пользователями.

Подробная информация в документации модуля **`category/`**.

---

### `dependency/`

Модуль, содержащий логику управления зависимостями между задачами. Включает:

- Модель **`DependencyOrm`** для описания структуры данных.
- Функции в **`repository.py`** для работы с базой данных.
- API-маршруты в **`router.py`** для взаимодействия с пользователями.

Подробная информация в документации модуля **`dependency/`**.

